if (self.CavalryLogger) { CavalryLogger.start_js(["oh3Uv"]); }

__d("CometPhotoViewerAIProductTagSuggestions.react",["CometAIProductTagSuggestionsUtil.react","CometPhotoViewerViewStateDispatcherContext","CometRelay","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.aiSuggestionsQuery,d=a.photoID;a=a.queryReference;var e=g.useContext(b("CometPhotoViewerViewStateDispatcherContext"));c=b("CometRelay").usePreloadedQuery(c,a);a=b("CometAIProductTagSuggestionsUtil.react").processAIProductTagSuggestionsQueryResponse(c);c=a.get(d);if(!c)return null;e({knownAITags:c.knownSuggestions,photoID:d,type:"SET_KNOWN_AI_TAGS"});e({photoID:d,type:"SET_UNKNOWN_AI_TAGS",unknownAITags:c.unknownSuggestions});return null}}),null);
__d("CometPhotoViewerAIProductTagSuggestionTrigger.react",["CometAIProductTagSuggestionsQuery.react","CometPhotoViewerAIProductTagSuggestions.react","CometPhotoViewerViewStateContext","CometRelay","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.photoID;a=g.useContext(b("CometPhotoViewerViewStateContext"));var d=b("CometRelay").useQueryLoader(b("CometAIProductTagSuggestionsQuery.react")),e=d[0],f=d[1];g.useEffect(function(){f({max_suggestions_per_photo:1,photo_ids:[c]})},[f,c]);return c!==null&&c!==void 0&&!((d=a.knownAITags)==null?void 0:d.has(c))&&!((d=a.unknownAITags)==null?void 0:d.has(c))&&e!=null?g.jsx(b("CometPhotoViewerAIProductTagSuggestions.react"),{aiSuggestionsQuery:b("CometAIProductTagSuggestionsQuery.react"),photoID:c,queryReference:e}):null}}),null);
__d("CometPhotoViewerFullscreen.react",["fbt","ix","CometMediaViewerFullscreenContext","CometSetMediaViewerFullscreenContext","CometTooltip.react","React","TetraIcon.react","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i=b("React");function a(){var a=i.useContext(b("CometSetMediaViewerFullscreenContext")),c=i.useContext(b("CometMediaViewerFullscreenContext")),d=c?g._("Exit Fullscreen"):g._("Enter Fullscreen"),e=i.useCallback(function(){!c?a(!0):a(!1)},[c,a]);return i.jsx(b("CometTooltip.react"),{position:"below",tooltip:d,children:i.jsx(b("TetraIcon.react"),{"aria-label":d,color:"white",hideHoverOverlay:!0,icon:c?b("fbicon")._(h("517759"),24):b("fbicon")._(h("517764"),24),onPress:e,testid:void 0})})}}),null);
__d("ProductTagPhotoViewerIconClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744226");c=b("FalcoLoggerInternal").create("product_tag_photo_viewer_icon_click",a);e.exports=c}),null);
__d("CometPhotoViewerTopRightIcons.react",["fbt","ix","CometMediaViewerDispatcherContext","CometMediaViewerViewStateContext","CometNumberedBadge.react","CometPhotoViewerAIProductTagSuggestionTrigger.react","CometPhotoViewerFullscreen.react","CometPhotoViewerViewStateContext","CometPhotoViewerViewStateDispatcherContext","CometProductTagLoggingUtils","CometRouteParams","CometRow.react","CometRowItem.react","CometTooltip.react","CometTrackingNodeProvider.react","ProductTagPhotoViewerIconClickFalcoEvent","React","TetraIcon.react","WebSession","fbicon","gkx","stylex","useCometCallout"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k={aiProductTagBadge:{display:"j83agx80",end:"n7fi1qx3",position:"pmk7jnqg",top:"kr520xx4",zIndex:"tkr6xdv7"},iconButtons:{end:"n7fi1qx3",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"pmk7jnqg",top:"kr520xx4",zIndex:"tkr6xdv7"},productTagCallout:{maxWidth:"gtvx26ai"}},l=2,m=1;c=.2;var n=1+c,o=1-c;function a(a){var c=a.authorId,d=a.canTag,e=a.fromAYMTRetroTagNotification,f=a.numNewAISuggestions,p=a.photoID,q=a.shouldShowPeopleTagButton,r=a.shouldShowProductTagButton,s=a.storyContainerId;a=j.useContext(b("CometPhotoViewerViewStateContext"));var t=j.useContext(b("CometMediaViewerViewStateContext")),u=j.useContext(b("CometPhotoViewerViewStateDispatcherContext")),v=j.useContext(b("CometMediaViewerDispatcherContext")),w=j.useState(r&&e),x=w[0],y=w[1];w=g._("You can tag products from your catalog to make it easier for people to shop from your posts.");var z=b("CometRouteParams").useRouteParams(),A=e?b("CometProductTagLoggingUtils").getAYMTChannelName(z.aymt_channel):null;e={align:"end",arrowStyle:"edge",label:w,position:"below",type:"accent",xstyle:k.productTagCallout};z=b("useCometCallout")(e,x);w=j.useCallback(function(){v({type:"SET_ZOOM",zoomFactor:o})},[v]);e=j.useCallback(function(){v({type:"SET_ZOOM",zoomFactor:n})},[v]);x=null;r?x=j.jsxs(b("CometRowItem.react"),{children:[b("CometPhotoViewerAIProductTagSuggestionTrigger.react")&&j.jsx(b("CometPhotoViewerAIProductTagSuggestionTrigger.react"),{photoID:p}),j.jsxs(b("CometTooltip.react"),{position:"below",tooltip:f>0?g._("See suggested product tags"):g._("Tag Product"),children:[f!==0&&j.jsx("div",{className:(i||(i=b("stylex")))(k.aiProductTagBadge),children:b("CometNumberedBadge.react")!=null&&j.jsx(b("CometNumberedBadge.react"),{color:"blue",value:f})}),j.jsx(b("TetraIcon.react"),{"aria-label":g._("Tag product"),color:"white",disabled:t.scale>1,hideHoverOverlay:!0,icon:b("fbicon")._(h("1650356"),24),onPress:function(){b("ProductTagPhotoViewerIconClickFalcoEvent").log(function(){return{container_post_id:s,creation_session_id:b("WebSession").getId(),creator_id:c,media_id:p,media_type:"photo",platform:"comet",referral_code:A,referral_source:"post_viewer"}}),u({tagModeEnabled:!0,type:"SET_TAG_MODE_ENABLED"}),u({isProductTagging:!0,type:"SET_IS_PRODUCT_TAGGING"}),y(!1)},ref:z})]})]}):q&&(x=j.jsx(b("CometRowItem.react"),{children:j.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:140,children:j.jsx(b("CometTooltip.react"),{position:"below",tooltip:g._("Tag Photo"),children:j.jsx(b("TetraIcon.react"),{"aria-label":b("gkx")("1224637")?g._("tag coworkers"):g._("tag friends"),color:"white",disabled:t.scale>1,hideHoverOverlay:!0,icon:b("fbicon")._(h("502475"),24),onPress:function(){u({tagModeEnabled:!0,type:"SET_TAG_MODE_ENABLED"})},testid:void 0})})})}));return j.jsx("div",{className:(i||(i=b("stylex")))(k.iconButtons),children:j.jsxs(b("CometRow.react"),{align:"end",children:[b("gkx")("1785420")?j.jsx(b("CometRowItem.react"),{children:j.jsx(b("TetraIcon.react"),{"aria-label":g._("Zoom In"),color:t.scale===l?"disabled":"white",disabled:t.scale===l,hideHoverOverlay:!0,icon:b("fbicon")._(h("662137"),24),onPress:e})}):null,b("gkx")("1785420")?j.jsx(b("CometRowItem.react"),{children:j.jsx(b("TetraIcon.react"),{"aria-label":g._("Zoom Out"),color:t.scale===m?"disabled":"white",disabled:t.scale===m,hideHoverOverlay:!0,icon:b("fbicon")._(h("927287"),24),onPress:w})}):null,d&&!a.tagModeEnabled&&!a.isProductTagging?x:null,j.jsx(b("CometRowItem.react"),{children:j.jsx(b("CometPhotoViewerFullscreen.react"),{})})]})})}}),null);